<html>
    <head>
        <title>Module Federation Experiments</title>
        <script type="module">
            const sharedScope = {
                /**
                 * In the base-example, we have declared uuid as import: false
                 * So we provide a fallback by directly registering it with the shared scope object.
                 */
                uuid: {
                    '1.0.0': {
                        get: () => () => Promise.resolve({ v4: { mock: 'uuid'} }),
                    }
                },
            };
            
            globalThis.sharedScope = sharedScope;
            
            const basePath = window.location.href.slice(0, window.location.href.lastIndexOf('/'));
            const remoteEntryUrl = `${basePath}/remoteEntry.js`;
            const container = await import(remoteEntryUrl);
            
            console.log("doing container.init()");
            await container.init(sharedScope);
            console.log("shared scope: ", JSON.stringify(sharedScope, null, 2));
            
            console.log("doing container.get('./react-dom')");
            const reactDOM = (await container.get('./react-dom'))();
            console.log("exposed module ./react-dom: ", reactDOM);
            console.log("shared scope: ", JSON.stringify(sharedScope, null, 2));
        </script>
    </head>
    <body>
        <h3>View page source to see what's happening</h3>
        <h3>Open JS console to see logs.</h3>
    </body>
</html>
